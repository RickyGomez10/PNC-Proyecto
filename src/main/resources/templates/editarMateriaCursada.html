<!DOCTYPE html>
<html xmlms:th="http://www.thymeleaf.org" xmlns:xmlms="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Agregar Materia</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>
<body>

    <div>
        <h1> Editar Materia Cursada </h1>
        <div th:object="${estudiante}">
            <h2>Datos del estudiante</h2>
            <label><b>Nombre del estudiante:</b> <span id="nombre" th:text="*{nombre + ' ' + apellido}"></span></label><br>
            <label><b>Carné:</b> <span id="carne" th:text="*{carne}"></span></label>
        </div>
        <form th:action="@{/edMateriaCursada}" th:object="${mxe}" method="post" modelAttribute="mxe">
            <input type="hidden" th:value="${estudiante.idEstudiante}" id="idEstudiante" name="idEstudiante">
            <h2>Datos de la materia cursada</h2>
            <table>
                <tr>
                    <td><label>Materia: </label></td>
                    <td>
                        <input type="hidden" id="idMateria" name="idMateria" th:value="*{materia.idMateria}">
                        <span th:text="*{materia.nombre}"></span>
                    </td>
                </tr>

                <tr>
                    <td><label for="anio">Año de curso: </label></td>
                    <td>
                        <select id="anio" th:field="*{anio}">
                            <option th:each="a : ${anios}" th:value="${a}" th:text="${a}"></option>
                        </select>
                        <br><span th:errors="*{anio}" style="color:  #E81505;"></span>
                    </td>
                </tr>

                <tr>
                    <td><label for="ciclo">Ciclo de curso: </label></td>
                    <td>
                        <select id="ciclo" th:field="*{ciclo}">
                            <option value="01">01</option>
                            <option value="02">02</option>
                            <option value="03">03</option>
                        </select>
                        <br><span th:errors="*{ciclo}" style="color:  #E81505;"></span>
                    </td>
                </tr>

                <tr>
                    <td><label for="nota">Nota: </label></td>
                    <td>
                        <input id="nota" type="number" step="0.01" min="0" max="10" th:field="*{nota}">
                        <br><span th:errors="*{nota}" style="color:  #E81505;"></span>
                    </td>
                </tr>

                <tr>
                    <td colspan="2"><input type="submit" value="Guardar cambios"></td>
                </tr>
            </table>
        </form>
        <form th:action="@{/materiasCursadas}" th:object="${estudiante}" method="post">
            <Button th:name="carne" th:value="*{carne}">Regresar</Button>
        </form>
    </div>

    <script th:if="${msg == '2'}">
        swal("Algo ha salido mal...", "Esa materia ya ha sido registrada para el usuario seleccionado.", "error");
    </script>

    <script th:if="${msg == '3'}">
        swal("Algo ha salido mal...", "Por favor revisa que la información proporcionada sea correcta.", "error");
    </script>

</body>
</html>